# ุฏููู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง

## ุงููุดููุฉ: ูุง ุฃุฑู ุฃุตุฏูุงุฆู ูู ุตูุญุฉ ุงูุฃุตุฏูุงุก ููุง ุฃุฑู ููุงุนูุฏู ูู ุตูุญุชู

### ุงูุชุนุฏููุงุช ุงููุทุจูุฉ:

#### 1. ุฅุถุงูุฉ ูุณู ุงูุทูุจุงุช ุงููุฑุณูุฉ (`lib/screens/friends_screen.dart`)

**ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ:**
- ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ ูุนุฑุถ ุงูุทูุจุงุช ุงููุฑุณูุฉ (pending_sent) ูู ูุงุฆูุฉ ุงูุฃุตุฏูุงุก
- ุงูุขู ููููู ุฑุคูุฉ ุงูุฃุดุฎุงุต ุงูุฐูู ุฃุฑุณูุช ููู ุทูุจุงุช ุตุฏุงูุฉ ููู ูุฑุฏูุง ุจุนุฏ
- ููููู ุฅูุบุงุก ุงูุทูุจ ุงููุฑุณู ุจุงูุถุบุท ุนูู ุฒุฑ "ุงูุชุธุงุฑ"

**ุงูุชุตููู:**
- ูุณู ุงูุทูุจุงุช ุงููุงุฑุฏุฉ: ุฎูููุฉ ุฒุฑูุงุก ูุน ุฃููููุฉ person_add
- ูุณู ุงูุทูุจุงุช ุงููุฑุณูุฉ: ุฎูููุฉ ุจุฑุชูุงููุฉ ูุน ุฃููููุฉ schedule_send
- ุฒุฑ "ุงูุชุธุงุฑ" ุจุฑุชูุงูู ููุทูุจุงุช ุงููุฑุณูุฉ (ูููู ุงูุถุบุท ุนููู ูุฅูุบุงุก ุงูุทูุจ)
- ุฒุฑ "ูุจูู" ุฃุฎุถุฑ ููุทูุจุงุช ุงููุงุฑุฏุฉ

#### 2. ุฅุตูุงุญ ูุงุฆูุฉ ุงูุฃุตุฏูุงุก (`lib/screens/friends_screen.dart`)

**ุงููุดููุฉ ุงูุฃุตููุฉ:**
- ูุงู ุงูููุชุฑ ูุชุทูุจ `isPublic = true` ูุนุฑุถ ุงูุฃุตุฏูุงุก
- ูุงู ุงูููุชุฑ `role = "user" || role = "" || role = null` ูุง ูุนูู ุจุดูู ุตุญูุญ ูู PocketBase
- ูุงูุช ุญุงูุงุช ุงููุชุงุจุนุฉ ุชูุญูุธ ุจุงุณุชุฎุฏุงู `followerId` ููุท ุจุฏูุงู ูู ID ุงูุตุฏูู ุงูุตุญูุญ

**ุงูุญู ุงููุทุจู:**
- ุฅุฒุงูุฉ ุดุฑุท `isPublic = true` ูู ุฌููุน ุงูููุงุชุฑ
- ุฌูุจ ุฌููุน ุงูุฃุตุฏูุงุก ุฃููุงูุ ุซู ููุชุฑุชูู ูู ุงูููุฏ (ูุฃู ููุงุชุฑ PocketBase ูุง ุชุนูู ุจุดูู ุตุญูุญ ูุน ุงูููู ุงููุงุฑุบุฉ/null)
- ููุชุฑุฉ ุงูุฃุตุฏูุงุก ุงูุนุงุฏููู: `role != "approved" && role != "admin"`
- ููุชุฑุฉ ุงูุฃุตุฏูุงุก ุงููุนุชูุฏูู: `role == "approved"`
- ุฅุตูุงุญ ุญูุธ ุญุงูุงุช ุงููุชุงุจุนุฉ ุจุงุณุชุฎุฏุงู ID ุงูุตุฏูู ุงูุตุญูุญ (ุงูุทุฑู ุงูุขุฎุฑ ูู ุงูุนูุงูุฉ)
- ุฅุถุงูุฉ ุฑุณุงุฆู ุชุดุฎูุต ููุตูุฉ (debug logs) ููุณุงุนุฏุชู ูู ููู ูุง ูุญุฏุซ

#### 2. ุฅุตูุงุญ ุงูุทูุจุงุช ุงููุนููุฉ

**ุงููุดููุฉ ุงูุฃุตููุฉ:**
- ูุงู ุงูููุชุฑ ูุชุทูุจ `isPublic = true` ูุนุฑุถ ุงูุทูุจุงุช ุงููุนููุฉ

**ุงูุญู ุงููุทุจู:**
- ุฅุฒุงูุฉ ุดุฑุท `isPublic = true` ูู ููุชุฑ ุงูุทูุจุงุช ุงููุนููุฉ
- ุงูุขู ุฌููุน ุงูุทูุจุงุช ุงููุนููุฉ ุชุธูุฑ ุจุบุถ ุงููุธุฑ ุนู ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ

### ููููุฉ ุงูุชุดุฎูุต:

#### 1. ูุญุต ุฑุณุงุฆู ุงูุชุดุฎูุต (Debug Logs)

ุนูุฏ ูุชุญ ุตูุญุฉ ุงูุฃุตุฏูุงุกุ ุณุชุธูุฑ ุฑุณุงุฆู ูู Console ูุซู:

```
๐ ุนุฏุฏ ุณุฌูุงุช ุงูุฃุตุฏูุงุก: X
๐ ููุชุฑ ุงูุฃุตุฏูุงุก ุงูุนุงุฏููู: (id = "..." || id = "...")
๐ ุฅุฌูุงูู ุงูุฃุตุฏูุงุก ุงููุณุชุฑุฌุนูู: X
   ๐ค ุงุณู ุงูุตุฏูู: role="user" -> ุนุงุฏู โ
   ๐ค ุงุณู ุงูุตุฏูู: role="approved" -> ูุนุชูุฏ/ุฃุฏูู โ
๐ ุนุฏุฏ ุงูุฃุตุฏูุงุก ุงูุนุงุฏููู ุงููุณุชุฑุฌุนูู: X
๐ ุญุงูุงุช ุงููุชุงุจุนูู: X
```

**ูุง ูุฌุจ ูุญุตู:**
- ุฅุฐุง ูุงู "ุนุฏุฏ ุณุฌูุงุช ุงูุฃุตุฏูุงุก" = 0ุ ููุฐุง ูุนูู ุฃูู ูุง ุชูุฌุฏ ุนูุงูุงุช ุตุฏุงูุฉ ููุจููุฉ (`status = "approved"`)
- ุฅุฐุง ูุงู "ุฅุฌูุงูู ุงูุฃุตุฏูุงุก ุงููุณุชุฑุฌุนูู" = 0ุ ููุฐุง ูุนูู ุฃู ููุงู ูุดููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฑุงุฌุน ุฑุณุงุฆู ุงูุชุดุฎูุต ููู ุตุฏูู ููุนุฑูุฉ ุฏูุฑู (role)
- ุฅุฐุง ูุงู "ุนุฏุฏ ุงูุฃุตุฏูุงุก ุงูุนุงุฏููู ุงููุณุชุฑุฌุนูู" = 0ุ ููุฐุง ูุนูู ุฃู ุฌููุน ุฃุตุฏูุงุฆู ูุฏููู `role = "approved"` ุฃู `role = "admin"`

#### 2. ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ูุญุต ุนูุงูุงุช ุงูุตุฏุงูุฉ:**
```sql
-- ูู PocketBase Admin Panel -> Collections -> friendship
-- ุงุจุญุซ ุนู ุงูุณุฌูุงุช ุงูุชู:
-- follower = "your_user_id" ุฃู following = "your_user_id"
-- status = "approved"
```

**ูุญุต ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู:**
```sql
-- ูู PocketBase Admin Panel -> Collections -> users
-- ุงุจุญุซ ุนู ุฃุตุฏูุงุฆู ูุชุญูู ูู ุญูู "role"
-- ุฅุฐุง ูุงู role = "approved" ุฃู "admin"ุ ุณูุธูุฑูู ูู ุชุจููุจ "ูุนุชูุฏูู"
-- ุฅุฐุง ูุงู role = "user" ุฃู ูุงุฑุบุ ุณูุธูุฑูู ูู ุชุจููุจ "ุนุงุฏููู"
```

#### 3. ูุญุต ุงูููุงุนูุฏ

ุนูุฏ ูุชุญ ุตูุญุชู ุงูุดุฎุตูุฉุ ุณุชุธูุฑ ุฑุณุงุฆู ูู Console ูุซู:

```
๐ ุฌูุจ ููุงุนูุฏ ุตุงุญุจ ุงูุญุณุงุจ: your_user_id
๐ ุงูููุงุนูุฏ ุงููุณุชุถุงูุฉ: X
๐ ุงูุฏุนูุงุช ุงูููุจููุฉ: X
๐ ุฅุฌูุงูู ุงูููุงุนูุฏ ุงููุฑูุฏุฉ: X
๐๏ธ ููุงุนูุฏ ูุญุฐููุฉ/ูุคุฑุดูุฉ: X
โ ุฅุฌูุงูู ุงูููุงุนูุฏ ุงููุนุฑูุถุฉ: X
```

**ูุง ูุฌุจ ูุญุตู:**
- ุฅุฐุง ูุงู "ุงูููุงุนูุฏ ุงููุณุชุถุงูุฉ" = 0 ู "ุงูุฏุนูุงุช ุงูููุจููุฉ" = 0ุ ููุฐุง ูุนูู ุฃูู ูุง ุชูุฌุฏ ููุงุนูุฏ ุฃุตูุงู
- ุฅุฐุง ูุงู "ุฅุฌูุงูู ุงูููุงุนูุฏ ุงููุฑูุฏุฉ" > 0 ููู "ุฅุฌูุงูู ุงูููุงุนูุฏ ุงููุนุฑูุถุฉ" = 0ุ ููุฐุง ูุนูู ุฃู ุฌููุน ุงูููุงุนูุฏ ูุญุฐููุฉ/ูุคุฑุดูุฉ ูู `user_appointment_status`

**ูุญุต ุญุงูุฉ ุงูููุงุนูุฏ:**
```sql
-- ูู PocketBase Admin Panel -> Collections -> user_appointment_status
-- ุงุจุญุซ ุนู ุงูุณุฌูุงุช ุงูุชู:
-- user = "your_user_id"
-- status = "deleted" ุฃู "archived"
-- ูุฐู ุงูููุงุนูุฏ ูู ุชุธูุฑ ูู ุตูุญุชู
```

### ุงูุญููู ุงููุญุชููุฉ:

#### ุฅุฐุง ูู ุชุธูุฑ ุงูุฃุตุฏูุงุก:

1. **ุชุฃูุฏ ูู ูุฌูุฏ ุนูุงูุงุช ุตุฏุงูุฉ ููุจููุฉ:**
   - ุงูุชุญ PocketBase Admin Panel
   - ุงุฐูุจ ุฅูู Collections -> friendship
   - ุชุฃูุฏ ูู ูุฌูุฏ ุณุฌูุงุช ุจู `status = "approved"`

2. **ุชุฃูุฏ ูู ุฃุฏูุงุฑ ุงูุฃุตุฏูุงุก:**
   - ุฅุฐุง ูุงู ุฌููุน ุฃุตุฏูุงุฆู ูุฏููู `role = "approved"`ุ ุณูุธูุฑูู ูู ุชุจููุจ "ูุนุชูุฏูู" ููุท
   - ุฅุฐุง ูุงู ุฌููุน ุฃุตุฏูุงุฆู ูุฏููู `role = "user"` ุฃู ูุงุฑุบุ ุณูุธูุฑูู ูู ุชุจููุจ "ุนุงุฏููู" ููุท

#### ุฅุฐุง ูู ุชุธูุฑ ุงูููุงุนูุฏ:

1. **ุชุฃูุฏ ูู ูุฌูุฏ ููุงุนูุฏ:**
   - ุงูุชุญ PocketBase Admin Panel
   - ุงุฐูุจ ุฅูู Collections -> appointments
   - ุชุฃูุฏ ูู ูุฌูุฏ ููุงุนูุฏ ุจู `host = "your_user_id"`

2. **ุชุฃูุฏ ูู ุญุงูุฉ ุงูููุงุนูุฏ:**
   - ุงูุชุญ PocketBase Admin Panel
   - ุงุฐูุจ ุฅูู Collections -> user_appointment_status
   - ุงุจุญุซ ุนู ุงูุณุฌูุงุช ุจู `user = "your_user_id"`
   - ุฅุฐุง ูุงูุช ุฌููุน ุงูููุงุนูุฏ ุจู `status = "deleted"` ุฃู `"archived"`ุ ูู ุชุธูุฑ

3. **ุญู ุณุฑูุน - ุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงูููุงุนูุฏ:**
   - ุงุญุฐู ุฌููุน ุงูุณุฌูุงุช ูู `user_appointment_status` ุงูุฎุงุตุฉ ุจู
   - ุฃู ุบููุฑ `status` ูู `"deleted"` ุฅูู `"active"`

### ุงููุดููุฉ ุงูููุชุดูุฉ ูู ุฑุณุงุฆู ุงูุชุดุฎูุต:

ูู ุงูุฑุณุงุฆู ุงูุชู ุธูุฑุช:
```
๐ ุนุฏุฏ ุณุฌูุงุช ุงูุฃุตุฏูุงุก: 2
๐ ููุชุฑ ุงูุฃุตุฏูุงุก ุงูุนุงุฏููู: (id = "mtbldgap18jai83" || id = "bets0q2sh471vn7") && role != "approved" && role != "admin"
๐ ุนุฏุฏ ุงูุฃุตุฏูุงุก ุงูุนุงุฏููู ุงููุณุชุฑุฌุนูู: 0
```

**ุงูุชุดุฎูุต:**
- ูุฏูู ุตุฏููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุนูุฏ ุชุทุจูู ุงูููุชุฑ `role != "approved" && role != "admin"` ูู PocketBaseุ ูู ูุชู ุงุณุชุฑุฌุงุน ุฃู ููููุง
- ุงูุณุจุจ: ููุงุชุฑ PocketBase ูุง ุชุนูู ุจุดูู ุตุญูุญ ูุน ุงูููู ุงููุงุฑุบุฉ (empty string) ุฃู null

**ุงูุญู ุงููุทุจู:**
- ุฌูุจ ุฌููุน ุงูุฃุตุฏูุงุก ุฃููุงู ุจุฏูู ููุชุฑุฉ ุญุณุจ role
- ุซู ููุชุฑุชูู ูู ุงูููุฏ (Dart) ุจุฏูุงู ูู PocketBase
- ูุฐุง ูุถูู ุฃู ุงูููุชุฑุฉ ุชุนูู ุจุดูู ุตุญูุญ ูุน ุฌููุน ุงูููู (user, approved, admin, empty, null)

### ููุงุญุธุงุช ูููุฉ:

1. **ูุธุงู ุงูุตุฏุงูุฉ ุงูุฌุฏูุฏ:**
   - ุงูุตุฏุงูุฉ ุงูุขู ุนูุงูุฉ ูุชุจุงุฏูุฉ (bidirectional)
   - ูุฌุจ ุฃู ูููู `status = "approved"` ููู ุชุธูุฑ ูู ูุงุฆูุฉ ุงูุฃุตุฏูุงุก
   - ุงูุทูุจุงุช ุงููุนููุฉ (`status = "pending"`) ุชุธูุฑ ูู ูุณู ูููุตู ุฃุนูู ุชุจููุจ "ุนุงุฏููู"

2. **ููุงุนุฏ ุงูุฑุคูุฉ ููููุงุนูุฏ:**
   - ุตุงุญุจ ุงูุญุณุงุจ ูุฑู ุฌููุน ููุงุนูุฏู (ุงููุณุชุถุงูุฉ + ุงููุฏุนู ุฅูููุง) ูุง ุนุฏุง ุงููุญุฐููุฉ/ุงููุคุฑุดูุฉ
   - ุงูุฒูุงุฑ ูุฑูู ุงูููุงุนูุฏ ุจูุงุกู ุนูู ููุงุนุฏ ุงูุฑุคูุฉ (ุงูุฎุตูุตูุฉ + ุงูุตุฏุงูุฉ + ุงูุฏูุฑ)

3. **ุงูุชุฎุฒูู ุงููุคูุช (Cache):**
   - ุงูุจูุงูุงุช ุชูุญูุธ ูู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ูุนุฑุถูุง ููุฑุงู
   - ูุชู ุงูุชุญุฏูุซ ูู ุงูุฎุงุฏู ูู ุงูุฎูููุฉ
   - ุฅุฐุง ููุช offlineุ ุณุชุธูุฑ ุงูุจูุงูุงุช ุงููุญููุธุฉ ููุท
